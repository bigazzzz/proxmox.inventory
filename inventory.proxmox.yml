plugin: community.general.proxmox
url: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  65366365353139616337323532663331623062306661346138633638663534656663373439626230
  3163623732343738316431623061643632343037653965340a653139353734353838656566616165
  32353661623030303935356535626338373938653738613330666464376138613738393866376330
  3964396439633861360a613631363839663234306264663030653834313839336136626537353737
  65656163363831396565316636343839643938363738643834636532306336663534
user: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  39386639633066333164313236343835323832306432313265333365633063336263643430326337
  3662643666343030366632616431303462303738373031610a333039316366353537613933663932
  61373830623162643263643863343333353932643965326638306365376564623930346365656332
  6636356338316534620a316535616161376163336664653362643063656538663831613161316362
  3836
password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  31333366646235663335313930643065653233353332326262306435376162356366623739343264
  6635386633346238326465616665663961356161336233630a353734393661343762313332356334
  64653738343533353535306436646435623837616662616331326131393964306665356236313638
  3162313835643162640a636638343339656338633236323833653230366466383834333838613566
  3939
# user: !vault |
#           $ANSIBLE_VAULT;1.1;AES256
#           34353536373738646230323338636235373762396462333662316130666661343936306634396530
#           3161303763396339323633613861363930653237336635370a396536366236386239653232306332
#           36313264303332623331386436343335623863396431643836323966646361306537356238363132
#           6366313566323131360a343061653763356331666166303835616339383633666133663433333866
#           6565
# token_id: !vault |
#           $ANSIBLE_VAULT;1.1;AES256
#           32343232653033373161323464356434333864653063313564663263663566303930343765626138
#           6136386530373566626639313234643562663566613335380a636566383931353534636431313161
#           36333831333037643066383262613931616231313732353063383732303562353937636265616130
#           3030363733663131320a633161313766396339336566653762386131663963313830383937663733
#           38373865376437623938376131656634326330343838326661613030346134323739
# token_secret: !vault |
#           $ANSIBLE_VAULT;1.1;AES256
#           61313466623063656530303538623931386232313633663432633035633033323431363863656130
#           3461333636643264306132386463626364306634616133350a396461616533616561313439666431
#           35623965363137393537353733613564373263623537616362653164613336623064653937623934
#           6637643034303964360a323064376564653863343137383465646337356462303966633438666533
#           63396561616336316531386130333133326234366437643632316663383462373131343164316263
#           3338616137313534326664663236613235666630336633626236
# use_extra_vars: true
# validate_certs: false
want_facts: true
want_proxmox_nodes_ansible_host: false
# cache: true
# strict: false
# filters:
#   - proxmox_status == "running" or proxmox_status == "stopped"
compose:
  ansible_host: proxmox_agent_interfaces[1]['ip-addresses'][0] | default(proxmox_ipconfig0.ip) | ansible.utils.ipv4('address')
  ip: proxmox_agent_interfaces | items2dict(key_name='name', value_name='ip-addresses')
  vmid: proxmox_vmid
  node: proxmox_node
  cpu: proxmox_cores
  mem: proxmox_memory
  os: proxmox_ostype
  status: proxmox_status
  desc: proxmox_description
